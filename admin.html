<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel Administrativo - Ana Luiza Fernandes Makeup</title>
  <link rel="icon" href="favicon.png" type="image/png" />
</head>
<body>
  <!-- Tela de Login -->
  <div class="login-container" id="loginContainer">
    <div class="login-box">
      <h2>Login Administrativo</h2>
      <input type="text" id="usuario" placeholder="Usu√°rio" />
      <input type="password" id="senha" placeholder="Senha" />
      <button id="btnLogin">Entrar</button>
      <p id="erroLogin" style="color: red; display: none;">Usu√°rio ou senha incorretos.</p>
    </div>
  </div>

  <!-- Painel Administrativo -->
  <div class="admin-container" id="adminContainer">
    <div id="adminHeader" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 20px;">
      <button id="btnLogout" class="btnSecundario">üì§ Sair</button>
      <button id="btnNovoAtendimento" class="btnPrimario">‚ûï Novo Atendimento</button>
      <button id="btnApagarTudo" class="btnPerigo">üóëÔ∏è Apagar Todos</button>
    </div>

    <h1>üìã Agendamentos - Ana Makeup</h1>

    <table>
<table>
  <thead>
    <tr>
      <th>Nome</th>
      <th>Telefone</th>
      <th>Data</th>
      <th>Per√≠odo</th>
      <th>Hor√°rio</th>
      <th>Procedimento</th>
      <th>Forma de Pagamento</th>
      <th>Valor (R$)</th>
      <th>Desconto?</th>
      <th>Valor Final (R$)</th>
      <th>Conclu√≠do</th>
      <th>A√ß√µes</th>
    </tr>
  </thead>
      <tbody id="tabelaAgendamentos"></tbody>
    </table>

    <div class="resumo">
      <h3>üí∞ Resumo Financeiro</h3>
      <p id="totalAgendamentos">Total de agendamentos: 0</p>
      <p id="valorTotal">Valor total: R$ 0,00</p>
      <div id="pagamentosResumo"></div>
    </div>
  </div>

  <!-- Modal Novo Atendimento -->
  <div id="modalNovo" class="modal">
    <div class="modal-content">
      <span class="close" id="fecharModal">&times;</span>
      <h2>‚ûï Novo Atendimento Manual</h2>

      <label>Nome da Cliente:</label>
      <input type="text" id="nomeManual" placeholder="Ex: Ana Souza" required />

      <label>Data:</label>
      <input type="date" id="dataManual" required />

      <label>Per√≠odo:</label>
      <select id="periodoManual">
        <option>Manh√£</option>
        <option>Tarde</option>
        <option>Noite</option>
      </select>

      <label>Hor√°rio:</label>
      <input type="time" id="horaManual" required />

      <label>Procedimento:</label>
      <input type="text" id="procedimentoManual" placeholder="Ex: Maquiagem Social" required />

      <label>Forma de Pagamento:</label>
      <select id="pagamentoManual">
        <option>PIX</option>
        <option>Dinheiro</option>
        <option>Cart√£o de Cr√©dito</option>
        <option>Cart√£o de D√©bito</option>
      </select>

      <label>Valor (R$):</label>
      <input type="number" id="valorManual" placeholder="Ex: 120" required />

      <label>Desconto (R$):</label>
      <input type="number" id="descontoManual" placeholder="Ex: 10" />

      <label>Observa√ß√µes:</label>
      <textarea id="obsManual" rows="3" placeholder="Ex: Cliente preferiu um hor√°rio extra..."></textarea>

      <button id="salvarManual" class="btnPrimario">üíæ Salvar Atendimento</button>
    </div>
  </div>

  <script type="module" src="admin.js"></script>

  <style>
body {
  background: #f3f4f6;
  font-family: "Poppins", sans-serif;
  margin: 0;
  padding: 0;
  color: #333;
}

/* containers principais */
.login-container, .admin-container {
  display: none;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  flex-direction: column;
  text-align: center;
  padding: 20px;
  box-sizing: border-box;
}

/* --- Login --- */
.login-box {
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
  width: 90%;
  max-width: 320px;
}

.login-box h2 {
  margin-bottom: 20px;
  color: #c2185b;
}

.login-box input {
  width: 100%;
  padding: 10px;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 8px;
}

.login-box button {
  background: #c2185b;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.2s;
  width: 100%;
}

.login-box button:hover {
  background: #a3154d;
}

/* --- Painel --- */
.admin-container {
  display: none;
  padding: 20px;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
}

h1 {
  color: #c2185b;
  text-align: center;
  margin: 30px 0 15px;
}

/* --- Bot√µes do topo --- */
#adminHeader {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
  position: sticky;
  top: 0;
  background: #f3f4f6;
  padding: 10px;
  z-index: 10;
}

.btnPrimario, .btnPerigo, .btnSecundario {
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  border: none;
  color: white;
  font-size: 14px;
  transition: 0.2s;
}

.btnPrimario { background: #c2185b; }
.btnPerigo { background: #e74c3c; }
.btnSecundario { background: #3498db; }

.btnPrimario:hover { background: #a3154d; }
.btnPerigo:hover { background: #c0392b; }
.btnSecundario:hover { background: #217dbb; }

/* --- Tabela --- */
table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

th, td {
  padding: 10px;
  border-bottom: 1px solid #ddd;
  text-align: center;
  font-size: 14px;
}

th {
  background-color: #c2185b;
  color: white;
}

td {
  color: #333;
  word-break: break-word;
}

table {
  width: 100%;
  overflow-x: auto;
}

.resumo {
  margin-top: 30px;
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

/* --- Modal --- */
.modal {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  overflow-y: auto;
  padding: 20px;
  box-sizing: border-box;
}

.modal-content {
  background: #fff;
  padding: 30px;
  border-radius: 12px;
  width: 90%;
  max-width: 420px;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
}

.modal-content label {
  text-align: left;
  font-weight: 500;
}

.modal-content input,
.modal-content select,
.modal-content textarea {
  width: 100%;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.modal-content .close {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 22px;
  cursor: pointer;
  color: #666;
}

.modal-content .close:hover {
  color: #000;
}

/* --- Responsividade --- */
@media (max-width: 768px) {
  h1 {
    font-size: 20px;
  }

  th, td {
    font-size: 12px;
    padding: 8px;
  }

  table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }

  .modal-content {
    width: 95%;
    padding: 20px;
  }
}
  </style>

  <script type="module">
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAlZAZjT8ZOWPf40Tf4lowdXcWxO179e1I",
      authDomain: "ana-makeup-bot.firebaseapp.com",
      projectId: "ana-makeup-bot",
      storageBucket: "ana-makeup-bot.firebasestorage.app",
      messagingSenderId: "448009074377",
      appId: "1:448009074377:web:fe1f01d20f35be123f7f18"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const modal = document.getElementById("modalNovo");
    const btnAbrir = document.getElementById("btnNovoAtendimento");
    const btnFechar = document.getElementById("fecharModal");
    const btnSalvar = document.getElementById("salvarManual");

    btnAbrir.addEventListener("click", () => modal.style.display = "flex");
    btnFechar.addEventListener("click", () => modal.style.display = "none");
    window.addEventListener("click", (e) => { if (e.target === modal) modal.style.display = "none"; });

    btnSalvar.addEventListener("click", async () => {
      const nome = document.getElementById("nomeManual").value.trim();
      const data = document.getElementById("dataManual").value;
      const periodo = document.getElementById("periodoManual").value;
      const horario = document.getElementById("horaManual").value;
      const procedimento = document.getElementById("procedimentoManual").value.trim();
      const formaPagamento = document.getElementById("pagamentoManual").value;
      const valor = parseFloat(document.getElementById("valorManual").value || 0);
      const desconto = parseFloat(document.getElementById("descontoManual").value || 0);
      const obs = document.getElementById("obsManual").value.trim();

      if (!nome || !data || !horario || !procedimento) {
        alert("Preencha todos os campos obrigat√≥rios!");
        return;
      }

      try {
        await addDoc(collection(db, "agendamentos"), {
          nome, data, periodo, horario, procedimento,
          formaPagamento, valor, desconto, observacoes: obs
        });
        alert("‚úÖ Atendimento adicionado com sucesso!");
        modal.style.display = "none";
        window.location.reload(); // Atualiza a lista
      } catch (e) {
        alert("‚ùå Erro ao salvar: " + e.message);
      }
    });
  </script>

    <style>
/* --- Dropdown Responsivo --- */
.dropdown {
  position: relative;
  display: inline-block;
}

.dropbtn {
  background-color: #3498db;
  color: white;
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 180px;
  box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  z-index: 9999;
  text-align: left;
  overflow: hidden;
}

.dropdown-content a {
  color: #333;
  padding: 10px 14px;
  text-decoration: none;
  display: block;
  font-size: 13px;
}

.dropdown-content a:hover {
  background-color: #f3f4f6;
}
</style>

</body>
</html>
